{"version":3,"sources":["Input.js","AddContactForm.js","Contact.js","Display.js","Filter.js","Notification.js","db.js","App.js","index.js"],"names":["Input","label","type","value","handleChange","onChange","AddContactForm","handleSubmit","inputData","onSubmit","map","Contact","contact","handleDelete","name","number","onClick","Display","contacts","id","Filter","Notification","notification","message","typeStyle","color","backgroundColor","style","border","fontStyle","fontSize","margin","padding","baseUrl","connectionError","error","toExport","getAll","a","axios","get","data","create","post","fullPerson","delContact","window","confirm","cancel","delete","update","put","savedContact","element","App","useState","persons","setPersons","newName","setNewName","newPhone","setNewPhone","filter","list","visiblePeople","setVisiblePeople","setNotification","showNotification","newNotification","setTimeout","showError","useCallback","fetchContacts","db","useEffect","nameRepeats","find","person","cleanInput","updateNumber","updatedContact","updateList","addContact","event","preventDefault","existingContact","newPerson","filterOutContact","removeContact","deleteContact","target","toLowerCase","includes","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.46c5fdfa.chunk.js","sourcesContent":["const Input = ({ label, type, value, handleChange }) => (\n  <div>\n    {label}: <input type={type} value={value} onChange={handleChange} />\n  </div>\n);\n\nexport default Input;\n","import Input from \"./Input\";\n\nconst AddContactForm = ({ handleSubmit, inputData }) => (\n  <>\n    <form onSubmit={handleSubmit}>\n      {inputData.map(({ label, type, value, handleChange }) => (\n        <Input\n          label={label}\n          type={type}\n          value={value}\n          handleChange={handleChange}\n          key={label}\n        />\n      ))}\n      <div>\n        <button type=\"submit\">add</button>\n      </div>\n    </form>\n  </>\n);\n\nexport default AddContactForm;\n","const Contact = ({ contact, handleDelete }) => (\n  <>\n    <li>\n      {contact.name} {contact.number}{\" \"}\n      <button onClick={() => handleDelete(contact)}>del</button>\n    </li>\n  </>\n);\n\nexport default Contact;\n","import Contact from \"./Contact\";\n\nconst Display = ({ contacts, handleDelete }) => (\n  <>\n    <ul>\n      {contacts.map((contact) => (\n        <Contact\n          key={contact.id}\n          contact={contact}\n          handleDelete={handleDelete}\n        />\n      ))}\n    </ul>\n  </>\n);\n\nexport default Display;\n","import Input from \"./Input\";\n\nconst Filter = ({ value, handleChange }) => (\n  <>\n    <Input\n      label={\"Show names containing\"}\n      type={\"text\"}\n      value={value}\n      handleChange={handleChange}\n    />\n  </>\n);\n\nexport default Filter;\n","const Notification = ({ notification }) => {\n  const { message, type } = notification;\n  const basicStyle = {\n    border: \"5px solid black\",\n    fontStyle: \"italic\",\n    fontSize: \"2rem\",\n    margin: \"5px 0\",\n    padding: \"5px 10px\",\n  };\n  const typeStyle =\n    type === \"error\"\n      ? { color: \"white\", backgroundColor: \"red\" }\n      : { color: \"black\", backgroundColor: \"MediumSeaGreen\" };\n  return message ? (\n    <div style={{ ...basicStyle, ...typeStyle }}>\n      <p style={{ margin: 0 }}>{message}</p>\n    </div>\n  ) : (\n    <div></div>\n  );\n};\n\nexport default Notification;\n","import axios from \"axios\";\nconst baseUrl = \"/api/persons\";\n\nconst connectionError = { error: \"Cannot connect to database\" };\nconst notFoundError = (element) => ({\n  error: `Could not find ${element} on the server`,\n});\n\nconst getAll = async () => {\n  try {\n    const { data } = await axios.get(baseUrl);\n    return { data };\n  } catch {\n    return connectionError;\n  }\n};\n\nconst create = async (contact) => {\n  try {\n    const { data } = await axios.post(baseUrl, contact);\n    return { fullPerson: data };\n  } catch {\n    return connectionError;\n  }\n};\n\nconst delContact = async (contact) => {\n  if (!window.confirm(`Are you sure you want to delete ${contact.name}?`))\n    return { cancel: true };\n  try {\n    await axios.delete(`${baseUrl}/${contact.id}`);\n    return {};\n  } catch {\n    return connectionError;\n  }\n};\n\nconst update = async (contact) => {\n  if (\n    !window.confirm(\n      `Contact ${contact.name} already exists. Replace the old number with the new one?`\n    )\n  )\n    return { cancel: true };\n  try {\n    const { data } = await axios.put(`${baseUrl}/${contact.id}`, contact);\n    return { savedContact: data };\n  } catch {\n    return notFoundError(contact.name);\n  }\n};\n\nconst toExport = { getAll, create, delContact, update };\n\nexport default toExport;\n","import { useState, useEffect, useCallback } from \"react\";\nimport AddContactForm from \"./AddContactForm\";\nimport Display from \"./Display\";\nimport Filter from \"./Filter\";\nimport Notification from \"./Notification\";\nimport db from \"./db\";\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState(\"\");\n  const [newPhone, setNewPhone] = useState(\"\");\n  const [visiblePeople, setVisiblePeople] = useState({\n    filter: \"\",\n    list: [...persons],\n  });\n  const [notification, setNotification] = useState({});\n\n  const showNotification = (newNotification) => {\n    setNotification(newNotification);\n    setTimeout(() => {\n      setNotification({});\n    }, 5000);\n  };\n\n  const showError = useCallback(\n    (error) => showNotification({ message: error, type: \"error\" }),\n    []\n  );\n\n  const fetchContacts = useCallback(async () => {\n    const { data, error } = await db.getAll();\n    if (error) return showError(error);\n    setPersons(data);\n    setVisiblePeople({ filter: \"\", list: data });\n  }, [showError]);\n\n  useEffect(() => {\n    fetchContacts();\n  }, [fetchContacts]);\n\n  const handleNameChange = (event) => {\n    setNewName(event.target.value);\n  };\n\n  const handlePhoneChange = (event) => {\n    setNewPhone(event.target.value);\n  };\n\n  const handleFilterChange = (event) => {\n    const filter = event.target.value;\n    setVisiblePeople({\n      filter,\n      list: persons.filter(({ name }) =>\n        name.toLowerCase().includes(filter.toLowerCase())\n      ),\n    });\n  };\n\n  const nameRepeats = (name, persons) =>\n    persons.find((person) => person.name === name);\n\n  const cleanInput = () => {\n    setNewName(\"\");\n    setNewPhone(\"\");\n  };\n\n  const updateContacts = (person) => {\n    setPersons([...persons, person]);\n    setVisiblePeople({\n      filter: \"\",\n      list: [...persons, person],\n    });\n  };\n\n  const updateNumber = async (contact) => {\n    let updatedContact = { ...contact, number: newPhone };\n    const { cancel, savedContact, error } = await db.update(updatedContact);\n    if (error) return showError(error);\n    if (cancel) return;\n    const updateList = (list) =>\n      list.map((person) =>\n        person.id !== savedContact.id ? person : savedContact\n      );\n    setPersons(updateList(persons));\n    setVisiblePeople({\n      ...visiblePeople,\n      list: updateList(visiblePeople.list),\n    });\n    cleanInput();\n    showNotification({ message: \"Phone number changed\", type: \"message\" });\n  };\n\n  const addContact = async (event) => {\n    event.preventDefault();\n    const existingContact = nameRepeats(newName, persons);\n    if (existingContact) return updateNumber(existingContact);\n    const newPerson = { name: newName, number: newPhone };\n    const { error, fullPerson } = await db.create(newPerson);\n    if (error) return showError(error);\n    cleanInput();\n    updateContacts(fullPerson);\n    showNotification({\n      message: `${fullPerson.name} added to contacts`,\n      type: \"message\",\n    });\n  };\n\n  const filterOutContact = ({ id }) => {\n    const removeContact = (contacts) =>\n      contacts.filter((contact) => contact.id !== id);\n    setPersons(removeContact(persons));\n    setVisiblePeople({\n      ...visiblePeople,\n      list: removeContact(visiblePeople.list),\n    });\n  };\n\n  const deleteContact = async (contact) => {\n    const { cancel, error } = await db.delContact(contact);\n    if (cancel) return;\n    if (error) return showError(error);\n    filterOutContact(contact);\n    showNotification({\n      message: `${contact.name} removed from contacts`,\n      type: \"message\",\n    });\n  };\n\n  const inputData = [\n    {\n      label: \"name\",\n      type: \"text\",\n      value: newName,\n      handleChange: handleNameChange,\n    },\n    {\n      label: \"tel\",\n      type: \"tel\",\n      value: newPhone,\n      handleChange: handlePhoneChange,\n    },\n  ];\n\n  return (\n    <div>\n      <h1>Phonebook</h1>\n      <Notification notification={notification} />\n      <Filter value={visiblePeople.filter} handleChange={handleFilterChange} />\n      <h2>Add new contacts</h2>\n      <AddContactForm handleSubmit={addContact} inputData={inputData} />\n      <h2>Numbers</h2>\n      <Display contacts={visiblePeople.list} handleDelete={deleteContact} />\n    </div>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}