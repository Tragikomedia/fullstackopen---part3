(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{45:function(e,t,n){"use strict";n.r(t);var r=n(3),a=n.n(r),c=n(20),u=n.n(c),s=n(5),o=n(1),i=n.n(o),l=n(4),b=n(10),p=n(6),f=n(0),d=function(e){var t=e.label,n=e.type,r=e.value,a=e.handleChange;return Object(f.jsxs)("div",{children:[t,": ",Object(f.jsx)("input",{type:n,value:r,onChange:a})]})},j=function(e){var t=e.handleSubmit,n=e.inputData;return Object(f.jsx)(f.Fragment,{children:Object(f.jsxs)("form",{onSubmit:t,children:[n.map((function(e){var t=e.label,n=e.type,r=e.value,a=e.handleChange;return Object(f.jsx)(d,{label:t,type:n,value:r,handleChange:a},t)})),Object(f.jsx)("div",{children:Object(f.jsx)("button",{type:"submit",children:"add"})})]})})},h=function(e){var t=e.contact,n=e.handleDelete;return Object(f.jsx)(f.Fragment,{children:Object(f.jsxs)("li",{children:[t.name," ",t.number," ",Object(f.jsx)("button",{onClick:function(){return n(t)},children:"del"})]})})},v=function(e){var t=e.contacts,n=e.handleDelete;return Object(f.jsx)(f.Fragment,{children:Object(f.jsx)("ul",{children:t.map((function(e){return Object(f.jsx)(h,{contact:e,handleDelete:n},e.id)}))})})},x=function(e){var t=e.value,n=e.handleChange;return Object(f.jsx)(f.Fragment,{children:Object(f.jsx)(d,{label:"Show names containing",type:"text",value:t,handleChange:n})})},O=function(e){var t=e.notification,n=t.message,r="error"===t.type?{color:"white",backgroundColor:"red"}:{color:"black",backgroundColor:"MediumSeaGreen"};return n?Object(f.jsx)("div",{style:Object(s.a)(Object(s.a)({},{border:"5px solid black",fontStyle:"italic",fontSize:"2rem",margin:"5px 0",padding:"5px 10px"}),r),children:Object(f.jsx)("p",{style:{margin:0},children:n})}):Object(f.jsx)("div",{})},m=n(8),g=n.n(m),w="/api/persons",k={error:"Cannot connect to database"},y={getAll:function(){var e=Object(l.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.a.get(w);case 3:return t=e.sent,n=t.data,e.abrupt("return",{persons:n.persons});case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",k);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),create:function(){var e=Object(l.a)(i.a.mark((function e(t){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.a.post(w,t);case 3:return n=e.sent,r=n.data,e.abrupt("return",{fullPerson:r});case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",k);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),delContact:function(){var e=Object(l.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.confirm("Are you sure you want to delete ".concat(t.name,"?"))){e.next=2;break}return e.abrupt("return",{cancel:!0});case 2:return e.prev=2,e.next=5,g.a.delete("".concat(w,"/").concat(t.id));case 5:return e.abrupt("return",{});case 8:return e.prev=8,e.t0=e.catch(2),e.abrupt("return",k);case 11:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}(),update:function(){var e=Object(l.a)(i.a.mark((function e(t){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.confirm("Contact ".concat(t.name," already exists. Replace the old number with the new one?"))){e.next=2;break}return e.abrupt("return",{cancel:!0});case 2:return e.prev=2,e.next=5,g.a.put("".concat(w,"/").concat(t.id),t);case 5:return n=e.sent,r=n.data,e.abrupt("return",{savedContact:r});case 10:return e.prev=10,e.t0=e.catch(2),e.abrupt("return",(a=t.name,{error:"Could not find ".concat(a," on the server")}));case 13:case"end":return e.stop()}var a}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}()},C=function(){var e=Object(r.useState)([]),t=Object(p.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(""),u=Object(p.a)(c,2),o=u[0],d=u[1],h=Object(r.useState)(""),m=Object(p.a)(h,2),g=m[0],w=m[1],k=Object(r.useState)({filter:"",list:Object(b.a)(n)}),C=Object(p.a)(k,2),S=C[0],D=C[1],A=Object(r.useState)({}),F=Object(p.a)(A,2),P=F[0],E=F[1],J=function(e){E(e),setTimeout((function(){E({})}),5e3)},L=Object(r.useCallback)((function(e){return J({message:e,type:"error"})}),[]),M=Object(r.useCallback)(Object(l.a)(i.a.mark((function e(){var t,n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.getAll();case 2:if(t=e.sent,n=t.persons,!(r=t.error)){e.next=7;break}return e.abrupt("return",L(r));case 7:a(n),D({filter:"",list:n});case 9:case"end":return e.stop()}}),e)}))),[L]);Object(r.useEffect)((function(){M()}),[M]);var z=function(e,t){return t.find((function(t){return t.name===e}))},B=function(){d(""),w("")},G=function(){var e=Object(l.a)(i.a.mark((function e(t){var r,c,u,o,l,b;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object(s.a)(Object(s.a)({},t),{},{number:g}),e.next=3,y.update(r);case 3:if(c=e.sent,u=c.cancel,o=c.savedContact,!(l=c.error)){e.next=9;break}return e.abrupt("return",L(l));case 9:if(!u){e.next=11;break}return e.abrupt("return");case 11:a((b=function(e){return e.map((function(e){return e.id!==o.id?e:o}))})(n)),D(Object(s.a)(Object(s.a)({},S),{},{list:b(S.list)})),B(),J({message:"Phone number changed",type:"message"});case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=Object(l.a)(i.a.mark((function e(t){var r,c,u,s,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!(r=z(o,n))){e.next=4;break}return e.abrupt("return",G(r));case 4:return c={name:o,number:g},e.next=7,y.create(c);case 7:if(u=e.sent,s=u.error,l=u.fullPerson,!s){e.next=12;break}return e.abrupt("return",L(s));case 12:B(),i=l,a([].concat(Object(b.a)(n),[i])),D({filter:"",list:[].concat(Object(b.a)(n),[i])}),J({message:"".concat(l.name," added to contacts"),type:"message"});case 15:case"end":return e.stop()}var i}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(e){var t=e.id,r=function(e){return e.filter((function(e){return e.id!==t}))};a(r(n)),D(Object(s.a)(Object(s.a)({},S),{},{list:r(S.list)}))},R=function(){var e=Object(l.a)(i.a.mark((function e(t){var n,r,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.delContact(t);case 2:if(n=e.sent,r=n.cancel,a=n.error,!r){e.next=7;break}return e.abrupt("return");case 7:if(!a){e.next=9;break}return e.abrupt("return",L(a));case 9:N(t),J({message:"".concat(t.name," removed from contacts"),type:"message"});case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=[{label:"name",type:"text",value:o,handleChange:function(e){d(e.target.value)}},{label:"tel",type:"tel",value:g,handleChange:function(e){w(e.target.value)}}];return Object(f.jsxs)("div",{children:[Object(f.jsx)("h1",{children:"Phonebook"}),Object(f.jsx)(O,{notification:P}),Object(f.jsx)(x,{value:S.filter,handleChange:function(e){var t=e.target.value;D({filter:t,list:n.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())}))})}}),Object(f.jsx)("h2",{children:"Add new contacts"}),Object(f.jsx)(j,{handleSubmit:I,inputData:T}),Object(f.jsx)("h2",{children:"Numbers"}),Object(f.jsx)(v,{contacts:S.list,handleDelete:R})]})};u.a.render(Object(f.jsx)(a.a.StrictMode,{children:Object(f.jsx)(C,{})}),document.getElementById("root"))}},[[45,1,2]]]);
//# sourceMappingURL=main.d5c75d32.chunk.js.map